<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
  <h1>You vs the Computer!</h1>
  <h3>Score</h3>

  <div id="round"></div>
  <div id="score"></div>
  <div id="result"></div>

  <button id="rock">Rock</button>
  <button id="paper">Paper</button>
  <button id="scissors">Scissors</button>

    <script>
        function getComputerChoice(){
          let num = Math.random();
          if (num <= 1/3) {
            return "rock";
          } else if (num <= 2/3){
            return "paper";
          } else {
            return "scissors";
          }
        }

        function playRound(playerSelection, computerSelection){
        if (playerSelection === "rock") {
          if (computerSelection === "rock"){
            document.getElementById("round").innerHTML = "Tie!";
            return "Tie";
          } else if (computerSelection === "paper"){
            document.getElementById("round").innerHTML = "Paper beats rock, you lose!";
            return "Lose"
          } else {
            document.getElementById("round").innerHTML = "Rock beats scissors, you win!";
            return "Win";
          }
        }
        if (playerSelection === "paper"){
          if (computerSelection === "rock"){
            document.getElementById("round").innerHTML = "Paper beats rock, you win";
            return "Win";
          } else if (computerSelection === "paper") {
            document.getElementById("round").innerHTML = "Tie!";
            return "Tie";
          } else {
            document.getElementById("round").innerHTML = "Scissors beats paper, you lose!";
            return "Lose";
          }
        }
        if (playerSelection === "scissors"){
          if (computerSelection === "rock"){
            document.getElementById("round").innerHTML = "Rock beats scissors, you lose!";
            return "Lose";
          } else if (computerSelection === "paper"){
            document.getElementById("round").innerHTML = "Scissors beats paper, you win!";
            return "Win";
          } else {
            document.getElementById("round").innerHTML = "Tie!";
            return "Tie";
          }
        }
      }
    
    let win = 0;
    let lose = 0;
    
    const buttons = document.querySelectorAll('button');
    
    //const rock = document.querySelector('#rock');
    //const paper = document.querySelector('#paper');
    //const scissors = document.querySelector('#scissors');
    //It is best to use the forEach method than create an event for each button, like i used in the examples above
    buttons.forEach((button) => {

    button.addEventListener('click', () => {
      let score = playRound(button.id, getComputerChoice());
      game(score);
    });
    });
    
    function game(score){
      //reset the final result after completing a bo5 game
      document.getElementById("result").innerHTML = "";
      if (score === "Win"){
        win++;
        document.getElementById("score").innerHTML = win + " x " + lose;
      } else if (score === "Lose"){
        lose++;
        document.getElementById("score").innerHTML = win + " x " + lose;
      } else if (score === "Tie"){
        document.getElementById("score").innerHTML = win + " x " + lose;     
      }
      if (win === 3 && win != lose){
        document.getElementById("result").innerHTML = "You Won!";
        win = 0; 
        lose = 0;
      } else if (lose === 3 && lose != win){
        document.getElementById("result").innerHTML = "You Lost!";
        win = 0; 
        lose = 0;
      }
    }
    </script>
</body>
</html>